<!DOCTYPE html>
<html lang="es">

<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Inventario TI Pro - Gesti√≥n de Activos</title>
    <script src="https://cdn.tailwindcss.com"></script>
    <script defer src="https://unpkg.com/@alpinejs/collapse@3.x.x/dist/cdn.min.js"></script>
    <script defer src="https://unpkg.com/alpinejs@3.x.x/dist/cdn.min.js"></script>
    <script src="https://cdn.jsdelivr.net/npm/sweetalert2@11"></script>
    <link href="https://fonts.googleapis.com/css2?family=Plus+Jakarta+Sans:wght@300;400;500;600;700;800&display=swap" rel="stylesheet">

    <style>
        body { font-family: 'Plus Jakarta Sans', sans-serif; }
        .glass-card { @apply bg-white/80 backdrop-blur-md border border-white/20 shadow-xl; }
        /* Inputs con enfoque de color */
        .input-premium { @apply w-full px-4 py-2.5 bg-slate-50 border border-slate-200 rounded-xl focus:ring-4 focus:ring-indigo-500/10 focus:border-indigo-500 focus:bg-white transition-all outline-none text-sm text-slate-700 shadow-sm; }
        /* Labels con color √≠ndigo suave */
        .label-premium { @apply text-[11px] font-bold text-indigo-600/70 uppercase tracking-widest mb-1.5 ml-1 block; }
        /* Botones con degradados m√°s intensos */
        .btn-gradient { @apply bg-gradient-to-br from-indigo-600 via-violet-600 to-purple-700 hover:from-indigo-700 hover:to-purple-800 text-white shadow-lg shadow-indigo-200 transition-all active:scale-95; }
        /* Estados con colores s√≥lidos y bordes */
        .status-badge { @apply px-3 py-1 rounded-full text-[10px] font-extrabold uppercase tracking-widest border shadow-sm; }
    </style>
</head>

<body class="bg-gradient-to-tr from-slate-50 via-slate-100 to-indigo-50/30 text-slate-900 antialiased pb-20 min-h-screen">

    <div class="max-w-7xl mx-auto px-4 sm:px-6 lg:px-8 pt-8" x-data="pcDashboard">

        <header class="flex flex-col md:flex-row justify-between items-start md:items-center mb-10 gap-6 bg-white/60 p-6 rounded-[2rem] border border-white backdrop-blur-md shadow-sm">
            <div>
                <div class="flex items-center gap-3 mb-2">
                    <div class="p-2 bg-gradient-to-tr from-indigo-600 to-violet-600 rounded-xl shadow-indigo-200 shadow-lg animate-pulse">
                        <svg class="w-6 h-6 text-white" fill="none" stroke="currentColor" viewBox="0 0 24 24">
                            <path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M9 3v2m6-2v2M9 19v2m6-2v2M5 9H3m2 6H3m18-6h-2m2 6h-2M7 19h10a2 2 0 002-2V7a2 2 0 00-2-2H7a2 2 0 00-2 2v10a2 2 0 002 2zM9 9h6v6H9V9z"></path>
                        </svg>
                    </div>
                    <h1 class="text-3xl font-extrabold tracking-tight text-slate-900">Sistemas<span class="text-transparent bg-clip-text bg-gradient-to-r from-indigo-600 to-violet-600">Inventory</span></h1>
                </div>
                <p class="text-slate-500 font-medium italic">Gesti√≥n centralizada de activos tecnol√≥gicos y perif√©ricos.</p>
            </div>

            <div class="flex items-center gap-3">
                <button @click="openAddComponentGlobal = true" class="flex items-center gap-2 px-4 py-2.5 bg-white border border-indigo-100 rounded-xl font-bold text-indigo-600 hover:bg-indigo-50 transition shadow-sm">
                    <span class="text-lg">üì¶</span> Stock Perif√©ricos
                </button>
                <button @click="openAddPCModal()" class="btn-gradient flex items-center gap-2 px-6 py-2.5 rounded-xl font-bold border-b-4 border-indigo-800/30">
                    <span class="text-xl">+</span> Nuevo Equipo
                </button>
            </div>
        </header>

        <section class="mb-10">
            <div class="flex items-center justify-between mb-4 px-2">
                <h2 class="text-xs font-black uppercase tracking-[0.2em] text-indigo-400">Componentes en Stock</h2>
                <span class="px-3 py-1 bg-emerald-500 text-white rounded-full text-[10px] font-black shadow-lg shadow-emerald-200" x-text="componentesGlobales.length + ' Disponibles'"></span>
            </div>

            <div class="grid grid-cols-1 sm:grid-cols-2 lg:grid-cols-4 gap-4">
                <template x-for="(comp, index) in componentesGlobales" :key="comp.id">
                    <div class="bg-white p-4 rounded-2xl border border-slate-100 shadow-sm flex justify-between items-center group hover:border-indigo-300 hover:shadow-md transition-all">
                        <div class="flex items-center gap-3">
                            <div class="w-10 h-10 rounded-xl bg-gradient-to-br from-slate-50 to-indigo-50 flex items-center justify-center text-lg border border-slate-100 group-hover:scale-110 transition-transform">üñ±Ô∏è</div>
                            <div>
                                <p class="font-bold text-slate-800 text-sm" x-text="comp.tipo"></p>
                                <p class="text-[10px] text-indigo-500 font-bold uppercase tracking-tighter" x-text="comp.marca + ' ‚Ä¢ ' + comp.aec"></p>
                            </div>
                        </div>
                        <button @click="confirmDeleteGlobal(index)" class="opacity-0 group-hover:opacity-100 p-2 text-slate-300 hover:text-rose-500 hover:bg-rose-50 rounded-lg transition-all">‚úï</button>
                    </div>
                </template>
                <template x-if="componentesGlobales.length === 0">
                    <div class="col-span-full py-10 border-4 border-dashed border-slate-200 rounded-[2rem] flex flex-col items-center justify-center text-slate-400 bg-white/40">
                        <p class="text-sm font-bold tracking-widest uppercase opacity-60">No hay perif√©ricos libres</p>
                    </div>
                </template>
            </div>
        </section>

        <div class="grid grid-cols-1 gap-6">
            <template x-for="(pc, index) in pcs" :key="pc.id">
                <div class="bg-white rounded-[2rem] border border-slate-200 shadow-sm overflow-hidden transition-all hover:shadow-xl hover:border-indigo-100 group/card">
                    <div class="p-5 flex flex-wrap justify-between items-center gap-4 border-b border-slate-50 cursor-pointer hover:bg-slate-50/50" @click="pc.open = !pc.open">
                        <div class="flex items-center gap-4 cursor-pointer">
                            <div :class="pc.tipo === 'Laptop' ? 'bg-gradient-to-br from-amber-400 to-orange-500 shadow-orange-100' : 'bg-gradient-to-br from-indigo-500 to-violet-600 shadow-indigo-100'" class="w-14 h-14 rounded-2xl flex items-center justify-center text-2xl shadow-lg text-white transform group-hover/card:scale-105 transition-transform">
                                <span x-text="pc.tipo === 'Laptop' ? 'üíª' : 'üñ•Ô∏è'"></span>
                            </div>
                            <div>
                                <div class="flex items-center gap-2">
                                    <h3 class="font-black text-slate-800 text-lg leading-tight" x-text="pc.marca + ' ' + pc.modelo"></h3>
                                    <span class="status-badge" :class="{
                                        'bg-emerald-50 text-emerald-600 border-emerald-200': pc.estado_equipo === 'ACTIVO',
                                        'bg-amber-50 text-amber-600 border-amber-200': pc.estado_equipo === 'MANTENIMIENTO',
                                        'bg-rose-50 text-rose-600 border-rose-200': pc.estado_equipo === 'INACTIVO'
                                    }" x-text="pc.estado_equipo"></span>
                                </div>
                                <p class="text-xs text-slate-400 font-bold uppercase tracking-wider" x-text="'S/N: ' + pc.serial + ' ‚Ä¢ AEC: ' + pc.aec"></p>
                            </div>
                        </div>

                        <div class="flex items-center gap-4 bg-indigo-50/50 px-5 py-3 rounded-2xl border border-white">
                            <div class="text-right">
                                <p class="text-[9px] font-black text-indigo-400 uppercase tracking-widest">Direcci√≥n IP</p>
                                <p class="text-sm font-mono font-black text-indigo-600" x-text="pc.ip || '0.0.0.0'"></p>
                            </div>
                            <div class="h-8 w-px bg-indigo-200"></div>
                            <div class="flex gap-1">
                                <button @click.stop="editPC(pc, index)" class="p-2.5 bg-white hover:bg-indigo-600 hover:text-white rounded-xl transition-all text-indigo-400 shadow-sm border border-indigo-100">
                                    <svg class="w-5 h-5" fill="none" stroke="currentColor" viewBox="0 0 24 24">
                                        <path d="M15.232 5.232l3.536 3.536m-2.036-5.036a2.5 2.5 0 113.536 3.536L6.5 21.036H3v-3.572L16.732 3.732z"></path>
                                    </svg>
                                </button>
                                <button @click.stop="confirmDeletePC(index)" class="p-2.5 bg-white hover:bg-rose-600 hover:text-white rounded-xl transition-all text-slate-400 shadow-sm border border-slate-200">
                                    <svg class="w-5 h-5" fill="none" stroke="currentColor" viewBox="0 0 24 24">
                                        <path d="M19 7l-.867 12.142A2 2 0 0116.138 21H7.862a2 2 0 01-1.995-1.858L5 7m5 4v6m4-6v6m1-10V4a1 1 0 00-1-1h-4a1 1 0 00-1 1v3M4 7h16"></path>
                                    </svg>
                                </button>
                            </div>
                        </div>
                    </div>

                    <div x-show="pc.open" x-collapse class="bg-gradient-to-b from-slate-50 to-white">
                        <div class="p-8">
                            <div class="grid grid-cols-1 lg:grid-cols-3 gap-8 mb-8">
                                <div class="space-y-4">
                                    <h4 class="text-[10px] font-black text-indigo-300 uppercase tracking-[0.2em] flex items-center gap-2">
                                        <span class="w-5 h-[2px] bg-indigo-100"></span> Sistema Base
                                    </h4>
                                    <div class="bg-white p-5 rounded-3xl border border-slate-100 shadow-sm">
                                        <div class="flex justify-between py-2.5 border-b border-slate-50">
                                            <span class="text-xs font-bold text-slate-400">Procesador</span>
                                            <span class="text-xs font-black text-slate-700" x-text="pc.procesador"></span>
                                        </div>
                                        <div class="flex justify-between py-2.5 border-b border-slate-50">
                                            <span class="text-xs font-bold text-slate-400">OS</span>
                                            <span class="text-xs font-black text-indigo-600" x-text="pc.sistema_operativo"></span>
                                        </div>
                                        <div class="flex justify-between py-2.5">
                                            <span class="text-xs font-bold text-slate-400">Ubicaci√≥n</span>
                                            <span class="text-xs font-black text-emerald-500">Oficina Principal</span>
                                        </div>
                                    </div>
                                </div>

                                <div class="space-y-4">
                                    <h4 class="text-[10px] font-black text-indigo-300 uppercase tracking-[0.2em] flex items-center gap-2">
                                        <span class="w-5 h-[2px] bg-indigo-100"></span> Memoria RAM
                                    </h4>
                                    <div class="flex flex-wrap gap-3">
                                        <template x-for="r in pc.ramData">
                                            <div class="bg-gradient-to-br from-indigo-600 to-violet-700 text-white p-4 rounded-2xl shadow-lg shadow-indigo-100 flex-1 min-w-[130px] border-b-4 border-indigo-900/20">
                                                <p class="text-2xl font-black" x-text="r.capacidad"></p>
                                                <p class="text-[10px] opacity-80 font-black uppercase tracking-tighter" x-text="r.tipo + ' ‚Ä¢ ' + r.frecuencia"></p>
                                            </div>
                                        </template>
                                    </div>
                                </div>

                                <div class="space-y-4">
                                    <h4 class="text-[10px] font-black text-indigo-300 uppercase tracking-[0.2em] flex items-center gap-2">
                                        <span class="w-5 h-[2px] bg-indigo-100"></span> Almacenamiento
                                    </h4>
                                    <div class="space-y-3">
                                        <template x-for="d in pc.discos">
                                            <div class="bg-white p-4 rounded-2xl border border-slate-100 flex items-center gap-4 shadow-sm hover:border-emerald-200 transition-colors">
                                                <div class="w-10 h-10 rounded-xl bg-emerald-50 text-emerald-500 flex items-center justify-center text-xl border border-emerald-100">üíæ</div>
                                                <div class="flex-1">
                                                    <p class="text-xs font-black text-slate-700 uppercase" x-text="d.tipo + ' ' + d.capacidad"></p>
                                                    <p class="text-[9px] font-bold text-emerald-500 uppercase tracking-tighter" x-text="d.estado"></p>
                                                </div>
                                            </div>
                                        </template>
                                    </div>
                                </div>
                            </div>

                            <div class="mt-8 pt-8 border-t border-slate-200/60">
                                <div class="flex justify-between items-center mb-5">
                                    <h4 class="text-xs font-black text-slate-800 uppercase tracking-widest">Perif√©ricos Vinculados</h4>
                                    <button @click="openAddComp(pc)" class="text-[10px] font-black bg-slate-900 text-white px-4 py-2 rounded-xl hover:bg-indigo-600 transition-all shadow-lg active:scale-95">
                                        + VINCULAR NUEVO
                                    </button>
                                </div>
                                <div class="grid grid-cols-1 md:grid-cols-3 gap-4">
                                    <template x-for="(comp, cIdx) in pc.componentes">
                                        <div class="bg-white border border-slate-200 p-4 rounded-2xl flex justify-between items-center group shadow-sm hover:shadow-md transition-all">
                                            <div class="flex items-center gap-3">
                                                <span class="w-10 h-10 rounded-xl bg-indigo-50 text-indigo-600 flex items-center justify-center text-lg border border-indigo-100">üîå</span>
                                                <div>
                                                    <p class="text-xs font-black text-slate-800" x-text="comp.tipo"></p>
                                                    <p class="text-[10px] text-indigo-400 font-bold" x-text="comp.marca + ' ‚Ä¢ ' + comp.serial"></p>
                                                </div>
                                            </div>
                                            <button @click="confirmDeleteComp(pc, cIdx)" class="text-slate-300 hover:text-rose-500 font-bold px-2 py-1 hover:bg-rose-50 rounded-lg transition-all">‚úï</button>
                                        </div>
                                    </template>
                                </div>
                            </div>
                        </div>
                    </div>
                </div>
            </template>
        </div>

        <div x-show="openAddPC" x-transition:enter="transition ease-out duration-300" x-transition:enter-start="opacity-0 scale-95" class="fixed inset-0 bg-slate-900/70 backdrop-blur-md flex items-center justify-center z-50 px-4">
            <div class="bg-white rounded-[2.5rem] w-full max-w-4xl shadow-2xl relative max-h-[90vh] flex flex-col overflow-hidden border border-white/20">
                <div class="p-8 border-b border-slate-100 flex justify-between items-center bg-gradient-to-r from-slate-50 to-white">
                    <div>
                        <h2 class="text-3xl font-black text-slate-800 tracking-tight" x-text="isEditing ? 'Editar Registro TI' : 'Nuevo Activo TI'"></h2>
                        <p class="text-sm text-indigo-500 font-bold uppercase tracking-widest mt-1">Configuraci√≥n de Hardware</p>
                    </div>
                    <button @click="openAddPC = false" class="w-12 h-12 rounded-2xl bg-white border border-slate-200 flex items-center justify-center hover:bg-rose-50 hover:text-rose-500 transition-all text-slate-400 font-bold shadow-sm">‚úï</button>
                </div>

                <div class="p-8 overflow-y-auto space-y-8 flex-1 bg-white">
                    <div>
                        <h3 class="text-xs font-black text-indigo-500 uppercase tracking-widest mb-5 flex items-center gap-2">
                            <span class="w-8 h-[2px] bg-indigo-500"></span> 1. Identificaci√≥n y Red
                        </h3>
                        <div class="grid grid-cols-1 md:grid-cols-4 gap-4">
                            <div class="md:col-span-2">
                                <label class="label-premium">Tipo de Hardware</label>
                                <select x-model="newPC.tipo" class="input-premium">
                                    <option value="" disabled selected>Seleccione tipo...</option>
                                    <option value="PC">Computadora de Escritorio</option>
                                    <option value="Laptop">Laptop / Port√°til</option>
                                    <option value="Servidor">Servidor Rack/Tower</option>
                                </select>
                            </div>
                            <div>
                                <label class="label-premium">Activo Fijo (AEC)</label>
                                <input x-model="newPC.aec" class="input-premium" placeholder="Ej: AEC-10250">
                            </div>
                            <div>
                                <label class="label-premium">Direcci√≥n IP</label>
                                <input x-model="newPC.ip" class="input-premium" placeholder="192.168.1.XX">
                            </div>
                        </div>
                    </div>

                    <div>
                        <h3 class="text-xs font-black text-indigo-500 uppercase tracking-widest mb-5 flex items-center gap-2">
                            <span class="w-8 h-[2px] bg-indigo-500"></span> 2. Especificaciones de F√°brica
                        </h3>
                        <div class="grid grid-cols-1 md:grid-cols-4 gap-4">
                            <div>
                                <label class="label-premium">Marca</label>
                                <input x-model="newPC.marca" class="input-premium" placeholder="Ej: Dell, HP, Lenovo...">
                            </div>
                            <div>
                                <label class="label-premium">Modelo</label>
                                <input x-model="newPC.modelo" class="input-premium" placeholder="Ej: Latitude 5420">
                            </div>
                            <div>
                                <label class="label-premium">Procesador</label>
                                <input x-model="newPC.procesador" class="input-premium" placeholder="Ej: Core i7-1185G7">
                            </div>
                            <div>
                                <label class="label-premium">N¬∞ Serial</label>
                                <input x-model="newPC.serial" class="input-premium" placeholder="Tag de servicio o S/N">
                            </div>
                        </div>
                    </div>

                    <div class="grid grid-cols-1 md:grid-cols-2 gap-8">
                        <div class="bg-indigo-50/40 p-6 rounded-[2rem] border border-indigo-100 shadow-inner">
                            <div class="flex justify-between items-center mb-5">
                                <label class="label-premium text-indigo-700">M√≥dulos RAM</label>
                                <button @click="rams.push({tipo:'', capacidad:'', frecuencia:'', fabricante:''})" class="text-[10px] font-black bg-indigo-600 text-white px-3 py-1.5 rounded-xl shadow-lg">+ AGREGAR</button>
                            </div>
                            <div class="space-y-4">
                                <template x-for="(r,i) in rams">
                                    <div class="bg-white p-4 rounded-2xl shadow-sm border border-indigo-100 transform transition-all hover:scale-[1.02]">
                                        <div class="grid grid-cols-3 gap-2 mb-3">
                                            <input x-model="r.capacidad" placeholder="Ej: 16GB" class="input-premium py-1.5 text-xs">
                                            <input x-model="r.tipo" placeholder="Ej: DDR4" class="input-premium py-1.5 text-xs">
                                            <button @click="rams.splice(i,1)" class="text-rose-500 text-[10px] font-black uppercase hover:bg-rose-50 rounded-lg transition-all">ELIMINAR</button>
                                        </div>
                                        <input x-model="r.frecuencia" placeholder="Frecuencia (Ej: 3200MHz)" class="input-premium py-1.5 text-xs w-full">
                                    </div>
                                </template>
                            </div>
                        </div>

                        <div class="bg-emerald-50/40 p-6 rounded-[2rem] border border-emerald-100 shadow-inner">
                            <div class="flex justify-between items-center mb-5">
                                <label class="label-premium text-emerald-700">Unidades de Almacenamiento</label>
                                <button @click="discos.push({tipo:'', capacidad:'', estado:'NUEVO'})" class="text-[10px] font-black bg-emerald-600 text-white px-3 py-1.5 rounded-xl shadow-lg">+ AGREGAR</button>
                            </div>
                            <div class="space-y-4">
                                <template x-for="(d,i) in discos">
                                    <div class="grid grid-cols-2 gap-3 bg-white p-4 rounded-2xl shadow-sm border border-emerald-100 transform transition-all hover:scale-[1.02]">
                                        <input x-model="d.tipo" placeholder="Tipo (SSD / NVMe)" class="input-premium py-1.5 text-xs">
                                        <input x-model="d.capacidad" placeholder="Capacidad (Ej: 512GB)" class="input-premium py-1.5 text-xs">
                                        <button @click="discos.splice(i,1)" class="text-rose-500 text-[10px] font-black uppercase col-span-2 text-center py-1 hover:bg-rose-50 rounded-lg mt-1 border border-dashed border-rose-200">ELIMINAR UNIDAD</button>
                                    </div>
                                </template>
                            </div>
                        </div>
                    </div>
                </div>

                <div class="p-8 border-t border-slate-100 flex justify-end gap-3 bg-slate-50/50">
                    <button @click="openAddPC=false" class="px-6 py-2.5 text-slate-500 font-black text-sm hover:bg-slate-100 rounded-xl transition-all">Cancelar</button>
                    <button @click="confirmSavePC()" class="btn-gradient px-12 py-3 rounded-xl font-black text-sm shadow-indigo-300">
                        <span x-text="isEditing ? 'Actualizar Informaci√≥n' : 'Guardar en Inventario'"></span>
                    </button>
                </div>
            </div>
        </div>

        <div x-show="openAddComponentGlobal" x-transition class="fixed inset-0 bg-slate-900/80 backdrop-blur-md flex items-center justify-center z-50">
            <div class="bg-white p-8 rounded-[2.5rem] w-[400px] shadow-2xl border border-white">
                <div class="flex items-center gap-3 mb-8">
                    <div class="w-12 h-12 bg-indigo-100 text-indigo-600 rounded-2xl flex items-center justify-center text-2xl">üì¶</div>
                    <h3 class="text-2xl font-black text-slate-800 tracking-tight">Nuevo Perif√©rico</h3>
                </div>
                <div class="space-y-5">
                    <div>
                        <label class="label-premium">Tipo de Dispositivo</label>
                        <input x-model="newGlobalComp.tipo" placeholder="Ej: Monitor, Teclado, Mouse..." class="input-premium">
                    </div>
                    <div>
                        <label class="label-premium">Marca / Fabricante</label>
                        <input x-model="newGlobalComp.marca" placeholder="Ej: Logitech, LG..." class="input-premium">
                    </div>
                    <div>
                        <label class="label-premium">N√∫mero de Serial</label>
                        <input x-model="newGlobalComp.serial" placeholder="N¬∞ de serie del fabricante" class="input-premium">
                    </div>
                </div>
                <div class="flex flex-col gap-3 mt-10">
                    <button @click="addGlobalComp()" class="btn-gradient w-full py-4 rounded-2xl font-black tracking-wide shadow-indigo-200">A√±adir al Stock</button>
                    <button @click="openAddComponentGlobal=false" class="w-full py-3 text-slate-400 font-bold text-sm hover:text-slate-600 transition-all">Cerrar Ventana</button>
                </div>
            </div>
        </div>

    </div>
    <script src="app.js"></script>
</body>

</html>